package keystrokesmod.module.impl.exploit;

import keystrokesmod.event.SendPacketEvent;
import keystrokesmod.module.Module;
import keystrokesmod.module.setting.impl.ModeSetting;
import net.minecraft.network.play.client.C03PacketPlayer;
import net.minecraft.network.play.client.C0FPacketConfirmTransaction;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;

public class Disabler extends Module {
    public static final String[] MODES = new String[]{"Vulcan"};

    private final ModeSetting mode;

    public Disabler() {
        super("Disabler", category.exploit);
        this.registerSetting(mode = new ModeSetting("Mode", MODES, 0));
    }

    @SubscribeEvent
    public void onSendPacket(SendPacketEvent event) {
        switch ((int) mode.getInput()) {
            case 0:
                if (event.getPacket() instanceof C0FPacketConfirmTransaction)
                    event.setCanceled(true);
                else if (event.getPacket() instanceof C03PacketPlayer
                        && !(event.getPacket() instanceof C03PacketPlayer.C04PacketPlayerPosition)
                        && !(event.getPacket() instanceof C03PacketPlayer.C05PacketPlayerLook)
                        && !(event.getPacket() instanceof C03PacketPlayer.C06PacketPlayerPosLook)
                )
                    event.setCanceled(true);
        }
    }
}
